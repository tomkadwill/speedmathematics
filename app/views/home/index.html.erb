<script>
$(document).on('change','#chapter',function(e){
  var form = $(this).closest('form');
  var value = $(this).val();
  var url = form.attr('action');

  var replaceDataBox = function(response) {
  	var content = $('#content');
    content.replaceWith(response);
  }
  $.get(url, replaceDataBox);
});

$(document).on('click', '#content', function(e){
	var url = 'question/answer';
	var question = $.trim($(this).text());

  var replaceDataBox = function(response) {
  	var content = $('#content');
    content.replaceWith(response);
  }
	$.get(url, {question: question}, replaceDataBox)
});

$(document).on('click', '#contentAnswer', function(e){
  var url = 'question/next';

  var replaceDataBox = function(response) {
    var content = $('#contentAnswer');
    content.replaceWith(response);
  }
  $.get(url, replaceDataBox)
});
</script>

<h1>Speed Mathematics</h1>

<%= form_tag(next_question_path, method: "get", id: 'chapter') do %>

  <p><label class="custom-select">
 	<%= select_tag(:chapter, options_for_select(chapters)) %>
 </label></p>

<% end %>

<div id="content">
	<% if @question %>
		<span id="question"><%= @question %></span>
	<% end %>
</div>

<div id="explanation">
  Select a chapter from <%= link_to 'the book', 'http://www.amazon.co.uk/Speed-Mathematics-Secret-Skills-Calculation/dp/0471467316' %> that you want to practise and click the button to reveal the answer. Click again to generate a new question.
</div>

<!--refactor footer out of index -->

<footer>
  <p class='twitter-logo'>
    <%= link_to(image_tag('twitter-hover.png', alt: 'share with twitter', title: 'Share with Twitter'), '/', class: 'twitter-image') %>
  </p>
  <p>
    <%= link_to '@tomkadwill', 'https://twitter.com/tomkadwill' %>
  </p>
</footer>